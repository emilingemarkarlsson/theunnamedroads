---
import PostsList from '@/components/PostsList.astro'
import PageLayout from '@/layouts/PageLayout.astro'
import config from '@/theme.config'
import { getCollection } from 'astro:content'

const posts = (await getCollection('posts'))
  .filter((post) => !post.data.draft)
  .sort(
    (a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf()
  )

const totalPages = Math.ceil(posts.length / config.postsPerPage)
const currentPosts = posts.slice(0, config.postsPerPage)

const frontmatter = {
  title: 'Insights',
  description:
    'Knowledge, findings, and thought leadership from our experiments and explorations',
  activeHeaderLink: 'Insights',
  fullBleed: true
}
---

<PageLayout {frontmatter}>
  <div class="homepage-shell space-y-10">
    <section class="section-shell space-y-4 text-center">
      <p class="section-eyebrow">Field notes</p>
      <div class="space-y-6">
        <h1 class="text-4xl font-semibold text-white sm:text-5xl">
          Insights &amp; learnings from the lab
        </h1>
        <p class="mx-auto max-w-3xl text-base text-slate-300 sm:text-lg">
          Documenting experiments, failures, and frameworks uncovered while
          building anonymously with AI. Every post captures signal pulled from
          real ops.
        </p>
      </div>
      <div class="flex flex-col gap-3 pt-2 sm:flex-row sm:justify-center">
        <a
          href="/feed.xml"
          class="inline-flex items-center justify-center gap-2 rounded-2xl border border-white/40 px-6 py-3 font-semibold text-white"
        >
          Subscribe via RSS
        </a>
        <a
          href="/contact"
          class="inline-flex items-center justify-center gap-2 rounded-2xl bg-white px-6 py-3 font-semibold text-gray-900"
        >
          Request a briefing
        </a>
      </div>
    </section>

    <section class="section-shell space-y-8">
      <div
        class="flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"
      >
        <div>
          <p class="section-eyebrow">Latest drops</p>
          <h2 class="text-3xl font-semibold text-white">Fresh intelligence</h2>
          <p class="mt-2 max-w-2xl text-slate-300">
            We publish only when the data is interesting—expect sharp takes on
            AI-native venture design, operating cadence, and experimentation
            rituals.
          </p>
        </div>
        {
          totalPages > 1 && (
            <a
              href="/posts"
              class="inline-flex items-center justify-center gap-2 rounded-2xl border border-white/40 px-6 py-3 font-semibold text-white"
            >
              View the full archive
            </a>
          )
        }
      </div>

      <PostsList posts={currentPosts} />
    </section>

    <section class="section-shell space-y-6">
      <div>
        <p class="section-eyebrow">Signals we track</p>
        <h2 class="text-3xl font-semibold text-white">Research streams</h2>
      </div>
      <div class="grid gap-4 md:grid-cols-2">
        <article class="signal-card space-y-2">
          <h3 class="text-xl font-semibold text-white">Experimentation</h3>
          <p class="text-sm text-slate-300">
            Methodologies, frameworks, and lessons from rapid venture tests.
          </p>
        </article>
        <article class="signal-card space-y-2">
          <h3 class="text-xl font-semibold text-white">AI Collaboration</h3>
          <p class="text-sm text-slate-300">
            How we pair operators with autonomous agents to compress build
            cycles.
          </p>
        </article>
        <article class="signal-card space-y-2">
          <h3 class="text-xl font-semibold text-white">Market Analysis</h3>
          <p class="text-sm text-slate-300">
            Scouting cultural, capital, and tech trends that unlock asymmetry.
          </p>
        </article>
        <article class="signal-card space-y-2">
          <h3 class="text-xl font-semibold text-white">Anonymous Ops</h3>
          <p class="text-sm text-slate-300">
            The art of shipping without identity baggage—systems over fame.
          </p>
        </article>
      </div>
    </section>
  </div>
</PageLayout>
