---

---

<button
  id="mobile-nav-toggle"
  class="flex items-center clickable"
  title="Mobile nav toggle"
  type="button"
>
  <span class="iconify tabler--menu-2"></span>
</button>

<script is:inline>
  const iconOpen = 'tabler--x'
  const iconClosed = 'tabler--menu-2'

  function setupMobileNavClickHandler() {
    const button = document.querySelector('#mobile-nav-toggle')
    const nav = document.querySelector('#mobile-nav')
    if (!button || !nav) return

    const icon = button.querySelector('span.iconify')
    if (!icon) return

    const handler = function(e) {
      e.preventDefault()
      e.stopPropagation()
      
      if (icon.className.includes(iconOpen)) {
        icon.classList.remove(iconOpen)
        icon.classList.add(iconClosed)
        nav.classList.add('hidden')
      } else {
        icon.classList.remove(iconClosed)
        icon.classList.add(iconOpen)
        nav.classList.remove('hidden')
      }
    }

    // Remove existing listeners and add new ones
    button.removeEventListener('click', handler)
    button.removeEventListener('touchend', handler)
    button.addEventListener('click', handler)
    button.addEventListener('touchend', handler)
  }

  // Run on both initial load and page navigation
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setupMobileNavClickHandler)
  } else {
    setupMobileNavClickHandler()
  }

  document.addEventListener('astro:page-load', setupMobileNavClickHandler)
</script>
